<div class="px-4 py-8" *ngIf="course$ | async as courseDetails">
  <div class="sticky top-16 py-4 bg-white z-10">
    <div class="container mx-auto">
      <div class="flex justify-between items-start">
        <div class="max-w-2xl">
          <h1 class="text-3xl font-bold exo-text">
            {{ courseDetails.title | titlecase }}
          </h1>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6 container mx-auto grid grid-cols-12 gap-6 mb-10">
    <div class="col-span-8">
      <video
        [src]="
          selectedVideo?.url
            ? selectedVideo!.url
            : courseDetails.previewVideo[0].url
        "
        alt="Course Image"
        class="w-full rounded shadow-lg"
        controls
      ></video>
    </div>

    <div class="col-span-4 rounded-md group relative bg-[#050708]">
      <div class="absolute rounded-md inset-0 bg-blue-800 opacity-20 z-0"></div>
      <div class="relative rounded-md flex flex-col h-full">
        <div
          class="flex-grow overflow-y-auto rounded-md p-4 bg-[#050708] text-white"
        >
          <div class="space-y-4">
            <!-- Example messages -->
            <div
              *ngFor="let message of messages"
              class="p-4 rounded-md bg-[#1a1a1a]"
            >
              {{ message }}
            </div>
          </div>
        </div>

        <div class="bg-[#1a1a1a] p-4">
          <div class="flex items-center space-x-4">
            <textarea
              [(ngModel)]="messageInput"
              (input)="adjustHeight($event)"
              placeholder="Ask Chat GPT ..."
              class="flex-grow p-3 rounded-md placeholder-center vertical-center bg-[#333] text-white focus:border-none border-none focus:outline-none focus:ring-0 resize-none"
              [style.height.px]="textareaHeight"
              rows="1"
            ></textarea>
            <button
              (click)="sendMessage()"
              class="p-2 px-4 bg-gradient-to-r from-blue-500 rounded-xl via-blue-600 to-blue-700 text-white"
            >
              Submit
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container mx-auto mb-8">
    <h2 class="text-2xl font-bold mb-4 exo-text">Videos</h2>

    <div class="grid grid-cols-2 gap-3">
      <div class="flex flex-col gap-4">
        <div>
          <div class="grid grid-cols-3 gap-3">
            
            <div
              *ngFor="let video of courseDetails.videos"
              class="ring-1 rounded-lg px-2 pt-2 pb-3 flex flex-col items-center"
            >
              <div (click)="changeVideo(video)" class="relative h-48 w-full">
                <img
                  [src]="courseDetails.previewImage[0].url"
                  alt="Video Thumbnail"
                  class="w-full h-full rounded-md shadow-md object-cover"
                />
                <button
                  class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center"
                >
                  <i class="fas fa-play-circle text-white text-3xl"></i>
                </button>
              </div>
              <span class="mt-3 text-sm font-medium jost-text">{{
                video.key | fileNameExtractor
              }}</span>
            </div>
          </div>
        </div>

        <div>
          <h2 class="text-2xl font-bold mb-4 exo-text">Notes</h2>
          <div class="grid grid-cols-3 gap-3">
            <div
              *ngFor="let note of courseDetails.notes"
              class="ring-1 rounded-lg p-4 flex flex-col items-center"
            >
              <img src="/images/pdf.png" alt="" />
              <span class="mt-2 text-sm font-medium jost-text">{{
                note.key | fileNameExtractor
              }}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="w-full bg-green-50 shadow-md rounded-md"></div>
    </div>
  </div>


</div>
